/*
 Navicat Premium Data Transfer

 Source Server         : localhost-pg
 Source Server Type    : PostgreSQL
 Source Server Version : 100014
 Source Host           : localhost:5432
 Source Catalog        : ispmanager2
 Source Schema         : public

 Target Server Type    : PostgreSQL
 Target Server Version : 100000
 File Encoding         : 65001

 Date: 29/03/2021 00:28:43
*/


-- ----------------------------
-- Sequence structure for tariffs_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "tariffs_id_seq";
CREATE SEQUENCE "tariffs_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for transactions_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "transactions_id_seq";
CREATE SEQUENCE "transactions_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Table structure for accounts
-- ----------------------------
DROP TABLE IF EXISTS "accounts";
CREATE TABLE "accounts" (
  "id" int4 NOT NULL,
  "number" int4 NOT NULL,
  "balance" float8 NOT NULL
)
;

-- ----------------------------
-- Records of accounts
-- ----------------------------
BEGIN;
INSERT INTO "accounts" VALUES (1, 1, 0);
INSERT INTO "accounts" VALUES (15, 15, -150);
INSERT INTO "accounts" VALUES (2, 2, 317.3);
COMMIT;

-- ----------------------------
-- Table structure for contact_details
-- ----------------------------
DROP TABLE IF EXISTS "contact_details";
CREATE TABLE "contact_details" (
  "id" int4 NOT NULL,
  "city" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "street" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "home" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "apartment" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "email" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "phone" varchar(45) COLLATE "pg_catalog"."default" NOT NULL
)
;

-- ----------------------------
-- Records of contact_details
-- ----------------------------
BEGIN;
INSERT INTO "contact_details" VALUES (1, 'Kharkiv', 'Pushkinskaya', '23a', '12', 'admin@gmail.com', '+380992589898');
INSERT INTO "contact_details" VALUES (2, 'Kharkiv', 'Traktorostroiteley', '79/42', '80', 'serdyukov.aleksey@gmail.com', '0504038624');
INSERT INTO "contact_details" VALUES (16, 'Kharkiv', 'Poltavski shlyakh', '10', '15', 'che@ukr.net', '+380503230505');
INSERT INTO "contact_details" VALUES (17, 'Kharkiv', 'Traktorostroiteley', '79/42', '80', 'serdyukov.aleksey@gmail.com', '0504038624');
INSERT INTO "contact_details" VALUES (18, 'Kharkiv', 'Traktorostroiteley', '79/42', '80', 'serdyukov.aleksey@gmail.com', '0504038624');
COMMIT;

-- ----------------------------
-- Table structure for roles
-- ----------------------------
DROP TABLE IF EXISTS "roles";
CREATE TABLE "roles" (
  "id" int4 NOT NULL,
  "name" varchar(45) COLLATE "pg_catalog"."default" NOT NULL
)
;

-- ----------------------------
-- Records of roles
-- ----------------------------
BEGIN;
INSERT INTO "roles" VALUES (1, 'ADMIN');
INSERT INTO "roles" VALUES (2, 'CLIENT');
COMMIT;

-- ----------------------------
-- Table structure for services
-- ----------------------------
DROP TABLE IF EXISTS "services";
CREATE TABLE "services" (
  "id" int4 NOT NULL,
  "name" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "description" varchar(255) COLLATE "pg_catalog"."default" NOT NULL
)
;

-- ----------------------------
-- Records of services
-- ----------------------------
BEGIN;
INSERT INTO "services" VALUES (1, 'Интернет', 'Безлимитные тарифные планы «Интернет»');
INSERT INTO "services" VALUES (2, 'Цифровое ТВ (IPTV)', 'Просмотр каналов в цифровом формате IPTV ');
INSERT INTO "services" VALUES (3, 'Телефонная связь', 'Мобильная телефонная связь');
COMMIT;

-- ----------------------------
-- Table structure for tariffs
-- ----------------------------
DROP TABLE IF EXISTS "tariffs";
CREATE TABLE "tariffs" (
  "id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
),
  "name" varchar(45) COLLATE "pg_catalog"."default" NOT NULL,
  "description" varchar(255) COLLATE "pg_catalog"."default" NOT NULL,
  "price" float8 NOT NULL,
  "services_id" int4 NOT NULL
)
;

-- ----------------------------
-- Records of tariffs
-- ----------------------------
BEGIN;
INSERT INTO "tariffs" VALUES (1, 'Безлім 100', 'до 100 Мбит/с, бесплатное подключение', 100, 1);
INSERT INTO "tariffs" VALUES (4, 'Все разом Базовий', '+  Мобільний зв''язок   12 000 МБ , 120 хв', 150, 1);
INSERT INTO "tariffs" VALUES (5, 'Все разом Вигідний', '+ Мобільний зв''язок - безлим  МБ , 180 хв', 200, 1);
INSERT INTO "tariffs" VALUES (3, 'Спілкування без меж', '6000 Мб + 60 хв', 125, 3);
INSERT INTO "tariffs" VALUES (6, 'Розваги без меж', '12000 Мб + 120 хв', 175, 3);
INSERT INTO "tariffs" VALUES (7, 'Відео без меж', '18000 Мб + 180 хв', 225, 3);
INSERT INTO "tariffs" VALUES (2, 'Megogo-TV', '222 канала в  HD-качестве', 150, 2);
COMMIT;

-- ----------------------------
-- Table structure for transactions
-- ----------------------------
DROP TABLE IF EXISTS "transactions";
CREATE TABLE "transactions" (
  "id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
),
  "timestamp" timestamp(6),
  "account_id" int4,
  "amount" numeric(255,2),
  "is_credit" bool,
  "description" varchar(255) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Records of transactions
-- ----------------------------
BEGIN;
INSERT INTO "transactions" VALUES (1, '2021-03-27 11:25:14', 2, 100.00, 't', 'top up');
INSERT INTO "transactions" VALUES (2, '2021-03-27 12:32:59.809', 2, 100.00, 't', 'Test top up');
INSERT INTO "transactions" VALUES (3, '2021-03-27 13:09:34.882', 2, 50.00, 'f', 'Test debit');
INSERT INTO "transactions" VALUES (25, '2021-03-27 13:52:23.266', 2, 4.70, 'f', 'Daily debiting of funds for the service: «Комфорт 50»');
INSERT INTO "transactions" VALUES (26, '2021-03-27 13:52:23.27', 2, 5.00, 'f', 'Daily debiting of funds for the service: Unlimited+');
COMMIT;

-- ----------------------------
-- Table structure for users
-- ----------------------------
DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int4 NOT NULL,
  "login" varchar(45) COLLATE "pg_catalog"."default",
  "password" varchar(150) COLLATE "pg_catalog"."default",
  "first_name" varchar(45) COLLATE "pg_catalog"."default",
  "last_name" varchar(45) COLLATE "pg_catalog"."default",
  "surname" varchar(45) COLLATE "pg_catalog"."default",
  "roles_id" int4,
  "contact_details_id" int4,
  "accounts_id" int4,
  "blocked" bool
)
;

-- ----------------------------
-- Records of users
-- ----------------------------
BEGIN;
INSERT INTO "users" VALUES (2, 'user', '$2a$10$/Ie1IkzWipmS4f51F1G30OAqzZPUwhmK9l.GoRxiKnp819wOgUYBO', 'Aleksey', 'Sergeevich', 'Serdyukov', 2, 2, 2, 'f');
INSERT INTO "users" VALUES (1, 'admin', '$2a$10$n0Ffg189M9Xfsl6ZHfJs2eLjTAAjw4hB45RB7aUPy2qoyjHiwuI4q', ' Ivan ', 'Ivanovich', 'Ivanov111', 1, 1, 1, 'f');
COMMIT;

-- ----------------------------
-- Table structure for users_has_tariffs
-- ----------------------------
DROP TABLE IF EXISTS "users_has_tariffs";
CREATE TABLE "users_has_tariffs" (
  "users_id" int4 NOT NULL,
  "tariffs_id" int4 NOT NULL
)
;

-- ----------------------------
-- Records of users_has_tariffs
-- ----------------------------
BEGIN;
INSERT INTO "users_has_tariffs" VALUES (12, 5);
INSERT INTO "users_has_tariffs" VALUES (12, 1);
INSERT INTO "users_has_tariffs" VALUES (12, 4);
INSERT INTO "users_has_tariffs" VALUES (12, 2);
INSERT INTO "users_has_tariffs" VALUES (12, 3);
INSERT INTO "users_has_tariffs" VALUES (12, 6);
INSERT INTO "users_has_tariffs" VALUES (2, 1);
INSERT INTO "users_has_tariffs" VALUES (2, 4);
INSERT INTO "users_has_tariffs" VALUES (13, 4);
INSERT INTO "users_has_tariffs" VALUES (13, 2);
INSERT INTO "users_has_tariffs" VALUES (13, 6);
COMMIT;

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "tariffs_id_seq"
OWNED BY "tariffs"."id";
SELECT setval('"tariffs_id_seq"', 8, true);
ALTER SEQUENCE "transactions_id_seq"
OWNED BY "transactions"."id";
SELECT setval('"transactions_id_seq"', 37, true);

-- ----------------------------
-- Primary Key structure for table accounts
-- ----------------------------
ALTER TABLE "accounts" ADD CONSTRAINT "accounts_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table contact_details
-- ----------------------------
ALTER TABLE "contact_details" ADD CONSTRAINT "contact_details_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table roles
-- ----------------------------
ALTER TABLE "roles" ADD CONSTRAINT "roles_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table services
-- ----------------------------
ALTER TABLE "services" ADD CONSTRAINT "services_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table tariffs
-- ----------------------------
CREATE INDEX "fk_tariffs_services1_idx" ON "tariffs" USING btree (
  "services_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table tariffs
-- ----------------------------
ALTER TABLE "tariffs" ADD CONSTRAINT "tariffs_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table transactions
-- ----------------------------
CREATE INDEX "account_id" ON "transactions" USING btree (
  "account_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table transactions
-- ----------------------------
ALTER TABLE "transactions" ADD CONSTRAINT "transactions_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table users
-- ----------------------------
CREATE INDEX "fk_users_accounts1_idx" ON "users" USING btree (
  "accounts_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);
CREATE INDEX "fk_users_contact_details1_idx" ON "users" USING btree (
  "contact_details_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);
CREATE INDEX "fk_users_roles_idx" ON "users" USING btree (
  "roles_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);
CREATE INDEX "login_UNIQUE" ON "users" USING btree (
  "login" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table users
-- ----------------------------
ALTER TABLE "users" ADD CONSTRAINT "users_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table users_has_tariffs
-- ----------------------------
CREATE INDEX "fk_users_has_tariffs_tariffs1_idx" ON "users_has_tariffs" USING btree (
  "tariffs_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);
CREATE INDEX "fk_users_has_tariffs_users1_idx" ON "users_has_tariffs" USING btree (
  "users_id" "pg_catalog"."int4_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table users_has_tariffs
-- ----------------------------
ALTER TABLE "users_has_tariffs" ADD CONSTRAINT "users_has_tariffs_pkey" PRIMARY KEY ("users_id", "tariffs_id");

-- ----------------------------
-- Foreign Keys structure for table transactions
-- ----------------------------
ALTER TABLE "transactions" ADD CONSTRAINT "account_id_fk" FOREIGN KEY ("account_id") REFERENCES "accounts" ("id") ON DELETE NO ACTION ON UPDATE NO ACTION;
